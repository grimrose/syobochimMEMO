============================================================
コマンドプロンプト
============================================================

.. contents:: 目次
   :depth: 2


ファイルコピー
============================================================

::

  cp [コピー元] [コピー先]

|

ディレクトリ階層だけコピー
============================================================

::

  xcopy /T /E [コピー元] [コピー先]

|

ディレクトリ作成
============================================================

::

  mkdir [ファイルパス]

|

正規表現を使用して削除
============================================================

| フォルダに移動してから実行。サブフォルダも対象。
|

フォルダ削除
---------------------------------

::

  for /R %i in (フォルダ名【正規表現可能】) do rd /Q /S "%i"

|

ファイル削除
---------------------------------

::

  for /R %i in (ファイル名【正規表現可能】) do del /Q /S "%i"

|

PCに登録しているファイルサーバーの権限を確認
============================================================

::

  net use

|
| 権限を削除する場合

::

  net use \\xxx.xx.xx.xxx /delete

|

環境変数確認
============================================================

特定のものを確認
---------------------------------

::

  echo %PATH%

|

全ての設定を確認
---------------------------------

::

  set

|


再起動
============================================================

| リモートデスクトップで接続している端末を再起動する場合

::

  shutdown -r -m \\NJKWxx -t 0


|
| なお、各オプションの意味は下記の通り

- -r ... 再起動
- -m ... リモート作業時のコンピュータを指定
- -t ... シャットダウンまでの時間を指定

.. warning::

  対象サーバのOSがWindowsServer2003もしくは、WindowsXPの場合、リモート接続にてスタートメニューから再起動を行うと、MSから過去にリリースされたパッチの影響で、リモート接続が出来なくなります。

|

フォルダ構成
============================================================

| tree表示

::

  tree

.. note::

  オプションに『/f』をつけるとファイル名も表示される

|

IPアドレスの確認
============================================================

::

  nslookup -?


使用法

::

   nslookup [-opt ...]                  # 既定のサーバーを使用する対話モード
   nslookup [-opt ...] - サーバー       # 'サーバー' を使用する対話モード
   nslookup [-opt ...] ホスト           # 既定のサーバーを使用して
                                          'ホスト' を検索
   nslookup [-opt ...] ホスト サーバー  # 'サーバー' を使用して 'ホスト' を検索

|

Jarファイルに格納されているファイルの閲覧
============================================================

JAR ファイル pack.jar に圧縮されているファイルの一覧は、次のコマンドを発行することで取得できる。

::

   jar tf pack.jar

|

フォルダ内のファイル一覧を表示する
============================================================

::

   dir *.jar /B /S


| *.jar は指定なくてもいい。
|
| **オプション説明**

- /B : ファイル名のみ出力
- /S : サブディレクトリを含めて表示

|

ファイルやコマンドの場所を検索
============================================================

::

   where <<実行コマンドなど>>


| コマンドの実行したときにどこの、何のファイルが場所を探すことが出来る。
|
| 例）

::

  C:\BL\DML08\20130917_hon>where find
  c:\java\gnuwin32\bin\find.exe
  c:\Windows\System32\find.exe
  c:\cygwin\bin\find.exe

|

ネットワーク上でファイルを実行
============================================================

| ネットワーク上でファイルを実行しようとすると、
| 「CMD では UNC パスは現在のディレクトリとしてサポートされません」と表示され、エラーになる。
| そのため、ほかのコンピュータ上のディレクトリに「cd」するには、あらかじめネットワークドライブを割り当てておかなければなる。
|
| ネットワーク割り当てコマンド

::

  pushd \\computer1\project1\program1

| 自動的にネットワークドライブが割り当てられ、そのディレクトリに移動する。
|
| 当該ディレクトリで作業後、次のコマンドを入力すると、ネットワークドライブが解除され、元のディレクトリに戻る。

::

  popd

| なお、認証を行うには、たとえば次のように入力して認証のダイアログボックスを表示し、ユーザー名とパスワードを入力してください。
|

::

  start \\computer1\project1\program1

|
|
| ネットワーク上のバッチを実行する場合は、下記ではさめばOK！

::

  rem 相対パスを取得して一時ディレクトリへ割り当て
  PUSHD %~dp0

  rem 上の処理を無効化
  POPD


- %~dp0 ： ツールが配置されている相対パスを取得

|
|